## Часто используемые команды

### Общие команды
```bash
make help              # показать список всех команд
make down              # остановить все контейнеры
make logs              # показать логи всех контейнеров
make status            # показать статус контейнеров
make clean             # очистить контейнеры и кэш
```

### Команды для разработки
```bash
make dev-rb            # пересобрать и перезапустить backend и frontend
make dev-rs            # перезапустить сервисы
make format            # отформатировать код
make lint              # проверить код линтером
make test              # запустить тесты
```

### Команды для продакшена
```bash
make prod-rb           # пересобрать и перезапустить сервисы
make prod-rs           # перезапустить сервисы
```

### Работа с базой данных
```bash
make migrate-up        # применить миграции
make migrate-down      # откатить миграции
make migrate-status    # показать статус миграций
make db-backup        # создать резервную копию БД
make db-restore       # восстановить БД из резервной копии
```

### Просмотр логов
```bash
make logs-backend     # логи бэкенда
make logs-frontend    # логи фронтенда
make logs-bot         # логи телеграм бота
make logs-nginx       # логи nginx
```

## Типичные сценарии использования

### Начало разработки нового функционала
```bash
make dev              # запускаем в режиме разработки
make logs-backend     # смотрим логи бэкенда в отдельном терминале
make logs-frontend    # смотрим логи фронтенда в отдельном терминале
```

### Обновление кода на сервере
```bash
git pull              # получаем последние изменения
make prod-rb          # пересобираем и перезапускаем сервисы
make logs             # проверяем логи на ошибки
```

### Работа с базой данных
```bash
# Создание новой миграции
make migrate-create name="add_new_table"

# Применение миграций
make migrate-up

# Создание резервной копии перед важными изменениями
make db-backup
```

### Отладка
```bash
make backend-shell    # получаем доступ к консоли бэкенда
make psql            # открываем консоль PostgreSQL
make redis-status    # проверяем статус Redis
```

## Полезные советы

1. Всегда проверяйте статус контейнеров после запуска:
```bash
make status
```

2. При проблемах с контейнерами, попробуйте полную перезагрузку:
```bash
make purge
make dev  # или make prod
```

3. Перед деплоем на продакшен:
- Запустите тесты: `make test`
- Проверьте код линтером: `make lint`
- Сделайте резервную копию БД: `make db-backup`

4. Для разработки телеграм бота:
```bash
make logs-bot        # смотрим логи бота
```